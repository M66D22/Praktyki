aimport java.io.*;
import java.util.Scanner;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import org.xml.sax.SAXException;

public class dataOperations {
    public static void main(String[] args) {
        File ifcFile = new File("Przyk³adowy plik IFC.xml");
        File dataFile = new File("Data.json");

        FileWriter fw;
        BufferedWriter bfw;

        try {
            fw = new FileWriter(dataFile);
            String clearFile = "";
            fw.write(clearFile);
            fw.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }


        String currentElement;
        String wallId;
        String wallName;
        String wallType;
        String wallPlacement;
        String wallTag;

        int i=0;
        try {
            Scanner ifcFileScanner = new Scanner(ifcFile);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(ifcFile);
            doc.getDocumentElement().normalize();
            System.out.println("Root element: "+doc.getDocumentElement().getNodeName());
            NodeList nList = doc.getElementsByTagName("IfcWallStandardCase");
            System.out.println("------------------------");
            for (int temp=0; temp<nList.getLength(); temp++){
                Node nNode = nList.item(temp);

                if (nNode.getNodeType() == Node.ELEMENT_NODE){
                    Element eElement = (Element) nNode;
                    currentElement = nNode.getNodeName();
                    wallId = eElement.getAttribute("id");
                    wallName = eElement.getAttribute("Name");
                    wallType = eElement.getAttribute("ObjectType");
                    wallPlacement = eElement.getAttribute("ObjectPlacement");
                    wallTag = eElement.getAttribute("Tag");
                    //Cudzys³ów w ascii
                    int ascii = 34;
                    char asciiChar = (char) ascii;

                    String fullData = "{"
                            +"\n"+asciiChar+"Current element"+asciiChar +":"+asciiChar+currentElement+asciiChar+",\n"
                            +asciiChar+"Id"+asciiChar+":"+asciiChar+wallId+asciiChar+",\n"
                            +asciiChar+"Wall name"+asciiChar+":"+asciiChar+wallName+asciiChar+",\n"
                            +asciiChar+"Wall type"+asciiChar+":"+asciiChar+wallType+asciiChar+",\n"
                            +asciiChar+"Wall tag"+asciiChar+":"+asciiChar+wallTag+asciiChar
                            +"\n"+"}";

                    fw = new FileWriter(dataFile, true);
                    bfw = new BufferedWriter(fw);
                    bfw.write("\n"+"\n"+fullData);
                    bfw.close();
                }
            }
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
        } catch (ParserConfigurationException e) {
            throw new RuntimeException(e);
        } catch (IOException e) {
            throw new RuntimeException(e);
        } catch (SAXException e) {
            throw new RuntimeException(e);
        }
    }
}